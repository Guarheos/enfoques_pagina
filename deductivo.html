<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo: Lógica Deductiva & Ciberseguridad</title>
    <style>
        :root {
            /* Paleta de colores unificada (Cian Cibernético + Azul Oscuro) */
            --primary: #00f2ff; 
            --accent: #05d9e8;
            --bg: #050a10;
            --panel: #0f1824;
            --text: #dcebf7;
            --danger: #ff2a6d;
        }

        body {
            font-family: 'Segoe UI', 'Roboto Mono', monospace;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            /* Fondo sutil de matriz de puntos del código 1 */
            background-image: linear-gradient(rgba(5, 10, 16, 0.95), rgba(5, 10, 16, 0.95)), 
                              url('data:image/svg+xml;utf8,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="2" cy="2" r="1" fill="rgba(0, 242, 255, 0.1)"/></svg>');
        }

        /* --- NAVEGACIÓN (Estilo Research Hub) --- */
        nav {
            background-color: var(--panel);
            border-bottom: 1px solid var(--primary);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.1);
            z-index: 10;
        }

        .nav-title {
            color: var(--primary);
            font-weight: bold;
            letter-spacing: 2px;
            font-size: 1.2em;
            text-shadow: 0 0 5px rgba(0, 242, 255, 0.5);
        }

        .nav-buttons { display: flex; gap: 10px; }

        .nav-btn {
            background: transparent;
            border: 1px solid rgba(0, 242, 255, 0.3);
            color: var(--text);
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 4px;
            font-family: inherit;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .nav-btn:hover, .nav-btn.active {
            border-color: var(--primary);
            background-color: rgba(0, 242, 255, 0.1);
            color: var(--primary);
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);
        }

        /* --- ÁREA DE CONTENIDO PRINCIPAL --- */
        main {
            flex: 1;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .content-view {
            display: none;
            width: 100%;
            height: 100%;
            animation: fadeIn 0.4s ease-out;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .content-view.active { display: flex; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        iframe {
            width: 100%;
            height: 100%;
            border: 1px solid var(--primary);
            border-radius: 4px;
            background-color: #fff;
        }

        /* --- ESTILOS ESPECÍFICOS DEL JUEGO (Logic Gate) --- */
        .game-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-y: auto; /* Permite scroll si la pantalla es muy pequeña */
        }

        .game-container {
            background-color: var(--panel);
            border: 1px solid var(--primary);
            padding: 30px;
            max-width: 700px;
            width: 90%;
            border-radius: 4px;
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.15);
            position: relative;
        }

        h2.game-header {
            color: var(--primary);
            text-align: center;
            font-weight: 300;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-top: 0;
            margin-bottom: 5px;
            text-shadow: 0 0 10px var(--primary);
        }

        .subtitle {
            text-align: center;
            color: var(--accent);
            font-size: 0.8em;
            margin-bottom: 25px;
            opacity: 0.7;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9em;
            border-bottom: 1px solid rgba(0, 242, 255, 0.3);
            padding-bottom: 10px;
        }

        /* Cajas de texto específicas del juego */
        .section-box {
            background: rgba(0, 242, 255, 0.03);
            padding: 15px 20px;
            margin-bottom: 20px;
            border-left: 3px solid var(--primary);
            text-align: left;
        }

        .label {
            color: var(--accent);
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
            font-size: 0.75em;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .scenario-text {
            font-size: 1.05em;
            line-height: 1.5;
        }

        /* Botones del juego */
        .game-controls {
            text-align: center;
            margin-top: 30px;
        }

        .btn-game {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 12px 30px;
            margin: 0 10px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s;
        }

        .btn-game:hover {
            background: var(--primary);
            color: var(--bg);
            box-shadow: 0 0 15px var(--primary);
        }

        .btn-game.danger {
            border-color: var(--danger);
            color: var(--danger);
        }

        .btn-game.danger:hover {
            background: var(--danger);
            color: white;
            box-shadow: 0 0 15px var(--danger);
        }

        #feedback-area {
            margin-top: 25px;
            text-align: center;
            padding: 15px;
            border-radius: 4px;
            display: none;
            border: 1px solid transparent;
        }

        .hidden { display: none !important; }

    </style>
</head>
<body>

    <nav>
        <div class="nav-title">LOGIC_GATE // SECURITY_HUB</div>
        <div class="nav-buttons">
            <button class="nav-btn active" onclick="switchTab('presentation')">PRESENTACIÓN</button>
            <button class="nav-btn" onclick="switchTab('document')">DOCUMENTO</button>
            <button class="nav-btn" onclick="switchTab('video')">VIDEO</button>
            <button class="nav-btn" onclick="switchTab('game')">SIMULACIÓN</button>
        </div>
    </nav>

    <main>
        <div id="view-presentation" class="content-view active">
            <iframe src="src/pres/Presentacion Enfoque Deductivo.pdf">
            </iframe>
        </div>

        <div id="view-document" class="content-view">
            <iframe src="src/docs/Enfoque Deductivo.pdf"></iframe>
        </div>

        <div id="view-video" class="content-view">
             <iframe width="90%" height="90%" src="https://www.youtube.com/embed/__2rqbryXlU" title="¿Qué es el método deductivo? Pasos y ejemplos" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>

        <div id="view-game" class="content-view">
            <div class="game-wrapper">
                <div class="game-container">
                    <h2 class="game-header">Logic Gate</h2>
                    <div class="subtitle">Sistema de Entrenamiento Deductivo v2.0</div>
                    
                    <div class="status-bar">
                        <span id="level-indicator">Caso: 1/5</span>
                        <span id="score-indicator">Integridad: 100%</span>
                    </div>

                    <div class="section-box">
                        <span class="label">Protocolo de Seguridad (Premisa Mayor)</span>
                        <div id="theory-text" class="scenario-text">...</div>
                    </div>

                    <div class="section-box">
                        <span class="label">Logs del Sistema (Observación)</span>
                        <div id="observation-text" class="scenario-text">...</div>
                    </div>

                    <div class="game-controls">
                        <p id="question-text" style="margin-bottom: 20px; font-style: italic;">...</p>
                        
                        <div id="buttons-container">
                            <button class="btn-game" onclick="checkAnswer(true)">VALIDAR (Verdadero)</button>
                            <button class="btn-game danger" onclick="checkAnswer(false)">RECHAZAR (Falso)</button>
                        </div>
                        
                        <button class="btn-game hidden" id="next-btn" onclick="nextLevel()">SIGUIENTE LOG >></button>
                    </div>

                    <div id="feedback-area"></div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- LÓGICA DE NAVEGACIÓN (TABS) ---
        function switchTab(tabId) {
            // Ocultar todas las vistas
            document.querySelectorAll('.content-view').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            
            // Mostrar la seleccionada
            document.getElementById('view-' + tabId).classList.add('active');
            
            // Activar botón (busca el botón que llamó a la función)
            // Nota: event.target funciona si el usuario hace click.
            if(event && event.target) {
                event.target.classList.add('active');
            }
        }

        // --- LÓGICA DEL JUEGO (LOGIC GATE) ---
        const levels = [
            {
                theory: "Todo archivo con extensión '.exe' es ejecutable en Windows.",
                observation: "El archivo 'virus_broma.jpg' es una imagen.",
                question: "¿Podemos deducir que 'virus_broma.jpg' NO se ejecutará como programa?",
                isCorrect: false, 
                explanation: "¡Error de lógica! La regla dice que los .exe SON ejecutables, pero no dice que SOLO los .exe lo sean. Un archivo podría tener un exploit o doble extensión."
            },
            {
                theory: "Si el servidor devuelve error 500, hay un fallo en el backend.",
                observation: "El usuario reporta un error 404 (No encontrado).",
                question: "¿Podemos concluir que el código del backend está funcionando perfectamente?",
                isCorrect: false, 
                explanation: "Falso. Negación del antecedente. Que no haya error 500 no garantiza perfección; puede haber errores lógicos que no tumban el servidor."
            },
            {
                theory: "Para acceder a la DB 'PRODUCCION', es obligatorio estar en la VPN.",
                observation: "El usuario 'Admin' NO está conectado a la VPN.",
                question: "¿Es imposible que 'Admin' acceda a la DB 'PRODUCCION'?",
                isCorrect: true, 
                explanation: "Correcto. Modus Tollens: Si P implica Q, y no tenemos Q, entonces no tenemos P."
            },
            {
                theory: "Todos los ataques de inyección SQL contienen caracteres especiales como (').",
                observation: "El input del usuario es: admin' OR 1=1;--",
                question: "¿Este input contiene comillas simples?",
                isCorrect: true, 
                explanation: "Correcto. Observación empírica directa que valida la premisa menor."
            },
            {
                theory: "Si el firewall está activo, el puerto 22 está cerrado.",
                observation: "El escaneo muestra que el puerto 22 está CERRADO.",
                question: "¿Podemos asegurar al 100% que el firewall está activo?",
                isCorrect: false, 
                explanation: "¡Cuidado! Falacia de afirmación del consecuente. El puerto podría estar cerrado simplemente porque el servicio SSH está apagado, no por el firewall."
            }
        ];

        let currentLevel = 0;
        let score = 100;

        function loadLevel() {
            if (currentLevel >= levels.length) {
                endGame();
                return;
            }

            const level = levels[currentLevel];
            
            document.getElementById('level-indicator').innerText = `Caso: ${currentLevel + 1}/${levels.length}`;
            document.getElementById('theory-text').innerText = level.theory;
            document.getElementById('observation-text').innerText = level.observation;
            document.getElementById('question-text').innerText = level.question;
            
            const feedbackEl = document.getElementById('feedback-area');
            feedbackEl.style.display = 'none';
            
            document.getElementById('buttons-container').classList.remove('hidden');
            document.getElementById('next-btn').classList.add('hidden');
        }

        function checkAnswer(userAnswer) {
            const level = levels[currentLevel];
            const feedbackEl = document.getElementById('feedback-area');
            
            document.getElementById('buttons-container').classList.add('hidden');
            document.getElementById('next-btn').classList.remove('hidden');
            
            feedbackEl.style.display = 'block';

            if (userAnswer === level.isCorrect) {
                feedbackEl.style.borderColor = 'var(--primary)';
                feedbackEl.style.backgroundColor = 'rgba(0, 242, 255, 0.1)';
                feedbackEl.innerHTML = `<h3 style='margin:0; color:var(--primary)'>DEDUCCIÓN CORRECTA</h3><p>${level.explanation}</p>`;
            } else {
                score -= 20;
                document.getElementById('score-indicator').innerText = `Integridad: ${score}%`;
                feedbackEl.style.borderColor = 'var(--danger)';
                feedbackEl.style.backgroundColor = 'rgba(255, 42, 109, 0.1)';
                feedbackEl.innerHTML = `<h3 style='margin:0; color:var(--danger)'>FALLO DE LÓGICA</h3><p>${level.explanation}</p>`;
            }
        }

        function nextLevel() {
            currentLevel++;
            loadLevel();
        }

        function endGame() {
            let message = "";
            let color = "";
            
            if(score === 100) { message = "Analista Senior. Lógica perfecta."; color = "var(--primary)"; }
            else if(score >= 60) { message = "Analista Junior. Revisa tus sesgos."; color = "#fff"; }
            else { message = "Acceso Revocado. Peligro para el sistema."; color = "var(--danger)"; }

            document.querySelector('.game-container').innerHTML = `
                <h1 style="text-align:center; color:var(--primary)">Auditoría Finalizada</h1>
                <div style="text-align:center; padding: 20px;">
                    <h2>Integridad Final: ${score}%</h2>
                    <p style="font-size: 1.2em; color: ${color}; margin-bottom:30px;">${message}</p>
                    <button class="btn-game" onclick="location.reload()">REINICIAR SISTEMA</button>
                </div>
            `;
        }

        // Iniciar carga del juego
        loadLevel();
    </script>
</body>
</html>